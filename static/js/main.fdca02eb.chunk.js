(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t,n){e.exports=n.p+"static/media/powered-by-foursquare-blue.b82e963c.svg"},154:function(e,t,n){e.exports=n(397)},159:function(e,t,n){},161:function(e,t,n){},163:function(e,t,n){},186:function(e,t,n){},188:function(e,t,n){},190:function(e,t,n){},389:function(e,t,n){},391:function(e,t,n){},393:function(e,t,n){},395:function(e,t,n){},397:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(60),o=n.n(s),i=(n(159),n(1)),c=n(2),l=n(12),u=n(11),p=n(13),m=(n(161),n(163),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidCatch",value:function(e,t){this.props.updateGlobalState({hasError:!0}),console.log(e),console.log(t)}},{key:"render",value:function(){return this.props.hasError?r.a.createElement("div",{className:"error-page"},r.a.createElement("div",{className:"error"},r.a.createElement("h1",null,"Error: Could not load the components."),r.a.createElement("h2",null,"Please refresh the page to try again."),r.a.createElement("h3",null,"If the problem persists, contact the developer."),r.a.createElement("p",null,r.a.createElement("i",null,"(Check the developer console for error details)")))):this.props.children}}]),t}(a.Component)),h=n(86),d=n.n(h),f=n(150),b=n(151),v=n.n(b),g=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"getBaseURL",value:function(){return"https://api.foursquare.com/v2"}},{key:"getParams",value:function(e){var t={v:"20180323",client_id:"VYQN5SKLH1VR2RUFIHYKWPNFZFDP0DO4FZDYKWIW4SYKZPVD",client_secret:"HLGAVNOAKSQKJMVTD0PXHY43BA0Y2BVI0PUWH1A4IBTKTH5V"};return e?Object.assign(t,e):t}},{key:"getRequestUrl",value:function(e){return this.getBaseURL()+e+"?"}},{key:"getResponse",value:function(){var e=Object(f.a)(d.a.mark(function e(t,n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(this.getRequestUrl(t)+new URLSearchParams(this.getParams(n))).then(function(e){return e.data}).catch(function(e){return console.log("Error is in fetching response from FOURSQUARE in getResponse() in FourSquare.js"),console.log(e),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),E=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"getRecommendedVenues",value:function(e){return g.getResponse("/venues/explore",e)}},{key:"searchVenues",value:function(e){return g.getResponse("/venues/search",e)}},{key:"getVenueDetails",value:function(e){return g.getResponse("/venues/".concat(e))}},{key:"getVenuePhotos",value:function(e){return g.getResponse("/venues/".concat(e,"/photos"))}}]),e}(),k=(n(186),n(188),n(190),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleWindowResize=function(){window.innerWidth<=768&&(n.setState({isActive:!1}),n.props.updateGlobalState({sideBarIsOpen:!1}))},n.handleHamburgerClick=function(){document.querySelector(".hamburger").classList.toggle("is-active"),n.state.isActive&&!0===n.props.sideBarIsOpen?(n.setState({isActive:!1}),n.props.updateGlobalState({sideBarIsOpen:!1})):(n.setState({isActive:!0}),n.props.updateGlobalState({sideBarIsOpen:!0}))},n.state={isActive:!0},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.handleWindowResize(),window.addEventListener("resize",this.handleWindowResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){return r.a.createElement("div",{className:"hamburger-container",tabIndex:"1"},r.a.createElement("button",{className:this.state.isActive?"hamburger hamburger--spin is-active":"hamburger hamburger--spin",type:"button",onClick:this.handleHamburgerClick},r.a.createElement("span",{className:"hamburger-box"},r.a.createElement("span",{className:"hamburger-inner"}))))}}]),t}(a.Component)),O=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement(k,{sideBarIsOpen:this.props.sideBarStatus,updateGlobalState:this.props.updateGlobal}),r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"Find My Coffee")))}}]),t}(a.Component),j=n(35),w=(n(389),Object(j.withScriptjs)(Object(j.withGoogleMap)(function(e){return r.a.createElement(j.GoogleMap,{defaultZoom:12,defaultCenter:{lat:31.5204,lng:74.3587},zoom:e.zoom,center:{lat:parseFloat(e.center.lat),lng:parseFloat(e.center.lng)}},e.markers&&e.markers.filter(function(e){return e.isVisible}).map(function(t,n,a){var s=e.venues.find(function(e){return e.id===t.id});return r.a.createElement(j.Marker,{key:n,position:{lat:t.lat,lng:t.lng},onClick:function(){return e.onMarkerClick(t)},animation:1===a.length?window.google.maps.Animation.BOUNCE:t.animation},t.isOpen&&r.a.createElement(j.InfoWindow,{onCloseClick:function(){return e.onInfoWindowClose(t)}},r.a.createElement(r.a.Fragment,null,s.bestPhoto&&r.a.createElement("img",{src:"".concat(s.bestPhoto.prefix,"200x200").concat(s.bestPhoto.suffix),alt:"Venue"}),r.a.createElement("h3",null,s.name.toUpperCase()),s.location.formattedAddress&&s.location.formattedAddress.map(function(e,t){return r.a.createElement("p",{key:t},e)}),s.canonicalUrl&&r.a.createElement("a",{href:"".concat(s.canonicalUrl),target:"_blank"},r.a.createElement("b",null,"View @ FourSquare.com")))))}))}))),C=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(!w)throw new Error("Error: Could not load the map.");return r.a.createElement(w,Object.assign({},this.props,{googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyDQnbsXckiHxVKDJI8secUufNqEJ0TUREE",loadingElement:r.a.createElement("div",{className:"loading-element"}),containerElement:r.a.createElement("div",{className:"map-container"}),mapElement:r.a.createElement("div",{className:"map-element"})}))}}]),t}(a.Component),y=(n(391),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{role:"presentation"},r.a.createElement("div",{className:"list-item",role:"tab",tabIndex:this.props.tabIndex,onClick:function(){return e.props.onListItemClick(e.props)},onKeyPress:function(){return e.props.onListItemClick(e.props)}},this.props.categories[0]&&r.a.createElement("img",{src:this.props.categories[0].icon.prefix+"32"+this.props.categories[0].icon.suffix,alt:this.props.categories[0].name}),r.a.createElement("p",null,this.props.name.toUpperCase()))))}}]),t}(a.Component)),I=(n(393),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("ol",{className:"venue-list",role:"tablist",tabIndex:"0"},this.props.venues&&this.props.venues.map(function(t,n){return r.a.createElement(y,Object.assign({key:n,tabIndex:n+1+e.props.inputTabIndex},t,{onListItemClick:e.props.onListItemClick}))}))}}]),t}(a.Component)),S=(n(395),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleFilterVenues=function(){return""!==n.state.query.trim()||0!==n.state.query.trim().length?n.props.venues.filter(function(e){return e.name.toLowerCase().includes(n.state.query.toLowerCase())}):n.props.venues},n.handleInputChange=function(e){n.setState({query:e.target.value.trim()});var t=n.props.venues.map(function(t){var a=t.name.toLowerCase().includes(e.target.value.trim().toLowerCase()),r=n.props.markers.find(function(e){return e.id===t.id});return r.isVisible=!!a,r});n.props.updateGlobalState({markers:t})},n.state={query:"",activeVenues:[],inputTabIndex:2},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.sideBarIsOpen&&r.a.createElement("div",{className:"sidebar-container"},r.a.createElement("div",{className:"sidebar-menu"},r.a.createElement("div",{className:"search-box"},r.a.createElement("input",{type:"search",id:"search",placeholder:"Filter by name",onChange:this.handleInputChange,onFocus:this.handleInputChange,tabIndex:"2"})),r.a.createElement(I,Object.assign({},this.props,{venues:this.handleFilterVenues(),onListItemClick:this.props.onListItemClick,inputTabIndex:this.state.inputTabIndex})),r.a.createElement("div",{className:"attribution"},r.a.createElement("h3",null,r.a.createElement("b",null,"DATA PROVIDED BY -"," ",r.a.createElement("a",{href:"https://developer.foursquare.com/"},"FOURSQUARE"))),r.a.createElement("img",{src:n(149),alt:"Powered by FOURSQUARE"}))))}}]),t}(a.Component)),R=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).updateGlobalState=function(t){e.setState(t)},e.refreshMarkers=function(){var t=e.state.markers.map(function(e){return e.isOpen=!1,e});e.setState({markers:Object.assign(e.state.markers,t)})},e.handleMarkerClick=function(t){e.refreshMarkers(),t.isOpen=!0,e.setState({markers:Object.assign(e.state.markers,t)});var n=e.state.venues.find(function(e){return e.id===t.id});E.getVenueDetails(t.id).then(function(t){var a=Object.assign(n,t.response.venue);e.setState({venues:Object.assign(e.state.venues,a)})}).catch(function(t){e.setState({appHasError:!0}),console.log("Error is in fetching the details of venues."),console.log(t)})},e.handleInfoWindowClose=function(){e.refreshMarkers()},e.handleListItemClick=function(t){e.refreshMarkers();var n=e.state.markers.find(function(e){return e.id===t.id});e.handleMarkerClick(n)},e.state={venues:[],markers:[],mapCenter:[],mapZoom:12,sideBarIsOpen:!0,appHasError:!1,venueParams:{query:"Coffee",near:"Lahore",limit:10}},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.searchVenues(this.state.venueParams).then(function(t){var n=t.response.venues,a=t.response.geocode.feature.geometry.center,r=n.map(function(e){return{lat:e.location.lat,lng:e.location.lng,isOpen:!1,isVisible:!0,id:e.id}});e.setState({venues:n,markers:r,mapCenter:a,isParamsUpdated:!1}),console.log(t)}).catch(function(t){e.setState({appHasError:!0}),console.log("Error is in setting initial state in componentDidMount() in App.js"),console.log(t)})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",{className:"App"},r.a.createElement(m,{hasError:this.state.appHasError,updateGlobalState:this.updateGlobalState})):r.a.createElement("div",{className:"App"},r.a.createElement(m,{hasError:this.state.appHasError,updateGlobalState:this.updateGlobalState},r.a.createElement(O,{sideBarStatus:this.state.sideBarIsOpen,updateGlobal:this.updateGlobalState}),r.a.createElement("main",null,r.a.createElement(S,{sideBarIsOpen:this.state.sideBarIsOpen,venues:this.state.venues,markers:this.state.markers,onListItemClick:this.handleListItemClick,updateGlobalState:this.updateGlobalState}),r.a.createElement(C,{center:this.state.mapCenter,zoom:this.state.mapZoom,venues:this.state.venues,markers:this.state.markers,onMarkerClick:this.handleMarkerClick,onInfoWindowClose:this.handleInfoWindowClose,updateGlobalState:this.updateGlobalState}),r.a.createElement("div",{className:"footer"},r.a.createElement("img",{src:n(149),alt:"Powered by FOURSQUARE"})))))}}]),t}(a.Component),N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(R,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Neighborhood-Map-Project-React",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Neighborhood-Map-Project-React","/service-worker.js");N?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):A(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):A(t,e)})}}()}},[[154,2,1]]]);
//# sourceMappingURL=main.fdca02eb.chunk.js.map